<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        p{
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Let's play!</h1>
    <div class="buttons">
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissors">Scissors</button>
    </div>
    <div class="results"></div>
    <script>
        //Selectors
        const buttons = document.querySelector('.buttons');
        const result = document.querySelector('.results');
        const para = document.createElement('p');
        const roundWinner = document.createElement('p');
        const rock = document.querySelector('#rock');
        const paper = document.querySelector('#paper');
        const scissors = document.querySelector('#scissors');

        rock.addEventListener('click', (e) => {
            play(e.target.id, computerPlay());
        });
        
        paper.addEventListener('click', (e) => {
            play(e.target.id, computerPlay());
        });

        scissors.addEventListener('click', (e) => {
            play(e.target.id, computerPlay());
        });

        //array with the choices
        const choices = ["rock", "paper", "scissors"];

        //choices
        let playerSelection = "";
        let computerSelection = "";

        //scores
        let playerScore = 0;
        let computerScore = 0;

        if(playerScore < 5 || computerScore < 5){

        }

        //random choice generator
        function computerPlay(){
            return choices[Math.floor(Math.random() * 3)];
        }

        //round play
        function play(player, computer){
            para.innerHTML = `Player: ${player} <br>Computer: ${computer}`;
            result.appendChild(para);

            if(player !== computer){
                if(player === "rock" && computer === "scissors"){
                    playerScore++;
                    roundWinner.innerHTML = `You win!<br>Player: ${playerScore}<br>Computer: ${computerScore}`;
                    result.appendChild(roundWinner);
                    gameWinner();
                } else if(player === "paper" && computer === "rock"){
                    playerScore++;
                    roundWinner.innerHTML = `You win!<br>Player: ${playerScore}<br>Computer: ${computerScore}`;
                    result.appendChild(roundWinner);
                    gameWinner();
                } else if(player === "scissors" && computer === "paper"){
                    playerScore++;
                    roundWinner.innerHTML = `You win!<br>Player: ${playerScore}<br>Computer: ${computerScore}`;
                    result.appendChild(roundWinner);
                    gameWinner();
                } else {
                    computerScore++;
                    roundWinner.innerHTML = `You loose!<br>Player: ${playerScore}<br>Computer: ${computerScore}`;
                    result.appendChild(roundWinner);
                    gameWinner();
                }
            } else {
                roundWinner.innerHTML = `It's a tie!<br>Player: ${playerScore}<br>Computer: ${computerScore}`;
                result.appendChild(roundWinner);
            }
        }

        //game winner
        function gameWinner(){
            if(playerScore === 5 || computerScore === 5){
                if(playerScore > computerScore){
                    para.textContent = "Player wins";
                    result.appendChild(para);
                    buttons.removeChild(rock);
                    buttons.removeChild(paper);
                    buttons.removeChild(scissors);
                } else {
                    para.textContent = "Computer wins";
                    result.appendChild(para);
                    buttons.removeChild(rock);
                    buttons.removeChild(paper);
                    buttons.removeChild(scissors);
                }
            }
        }

        /*
        //Creates an iteration for 5 plays, generates new choices before passing the parameters. Compares the scores and declares a winner
        function game(){
            for(let i = 0; i < 5; i++){
                playerSelection = prompt("Introduce your choice").toLowerCase();
                computerSelection = computerPlay();
                play(playerSelection, computerSelection);
            }
            if(playerScore > computerScore){
                return `You win! Player score:${playerScore} Computer score:${computerScore}`;
            } else if(computerScore > playerScore){
                return `You lose! Player score:${playerScore} Computer score:${computerScore}`;
            } else {
                return "It's a tie";
            }
        }
        console.log(game());
        */

    </script>
</body>
</html>